{
    "name": "flatpak",
    "config-opts": [
        "--disable-documentation",
        "--disable-seccomp",
        "--disable-sandboxed-triggers",
        "--disable-system-helper",
        "--with-system-install-dir=/var/lib/flatpak"
    ],
    "cleanup": [
        "/etc/profile.d",
        "/lib/systemd",
        "/share/dbus-1/interfaces/org.freedesktop.*",
        "/share/dbus-1/services/org.freedesktop.*",
        "/share/gdm"
    ],
    "post-install": [
        "cp /usr/bin/update-mime-database /app/bin",
        "cp /usr/bin/update-desktop-database /app/bin"
    ],
    "sources": [
        {
            "type": "archive",
            "url": "https://github.com/flatpak/flatpak/releases/download/1.14.4/flatpak-1.14.4.tar.xz",
            "sha256": "8a34dbd0b67c434e7598b98ec690953d046f0db26e480aeafb46d72aec716799",
            "x-checker-data": {
                "type": "json",
                "url": "https://api.github.com/repos/flatpak/flatpak/releases/latest",
                "version-query": ".tag_name",
                "url-query": "\"https://github.com/flatpak/flatpak/releases/download/\\($version)/flatpak-\\($version).tar.xz\""
            }
        }
    ],
    "modules": [
        {
            "name": "python3-pyparsing",
            "cleanup": [
                "*"
            ],
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --prefix=/app pyparsing-2.4.7-py2.py3-none-any.whl"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/8a/bb/488841f56197b13700afd5658fc279a2025a39e22449b7cf29864669b15d/pyparsing-2.4.7-py2.py3-none-any.whl",
                    "sha256": "ef9d7589ef3c200abe66653d3f1ab1033c3c419ae9b9bdb1240a85b024efc88b"
                }
            ]
        },
        {
            "name": "ostree",
            "config-opts": [
                "--disable-man",
                "--with-systemdsystemgeneratordir=/app/lib/systemd/system-generators",
                "--without-systemdsystemunitdir",
                "--with-curl"
            ],
            "cleanup": [
                "/etc/grub.d",
                "/etc/ostree",
                "/share/ostree",
                "/libexec"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/ostreedev/ostree/releases/download/v2023.4/libostree-2023.4.tar.xz",
                    "sha256": "7cee8ace6aae3c778527927a85abefbfbd491c021f52ae229c51ca3077f9c5d1",
                    "x-checker-data": {
                        "type": "json",
                        "url": "https://api.github.com/repos/ostreedev/ostree/releases/latest",
                        "version-query": ".tag_name",
                        "url-query": ".assets | first | .browser_download_url"
                    }
                }
            ]
        },
        {
            "name": "appstream",
            "buildsystem": "meson",
            "config-opts": [
                "-Dcompose=true"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/ximion/appstream/archive/refs/tags/v0.16.2.tar.gz",
                    "sha256": "9a2ebe660704878ab795470a72cd53049408ddd9da6e9cb45232cf0ed6505660",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 10385,
                        "url-template": "https://github.com/ximion/appstream/archive/refs/tags/v$version.tar.gz"
                    }
                }
            ],
            "modules": [
                {
                    "name": "libyaml",
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://github.com/yaml/libyaml/releases/download/0.2.5/yaml-0.2.5.tar.gz",
                            "sha256": "c642ae9b75fee120b2d96c712538bd2cf283228d2337df2cf2988e3c02678ef4"
                        }
                    ]
                },
                {
                    "name": "libstemmer",
                    "buildsystem": "cmake-ninja",
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://github.com/zvelo/libstemmer",
                            "tag": "78c149a3a6f262a35c7f7351d3f77b725fc646cf"
                        }
                    ]
                },
                {
                    "name": "libxmlb",
                    "buildsystem": "meson",
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://github.com/hughsie/libxmlb/archive/refs/tags/0.3.7.tar.gz",
                            "sha256": "fc00cdb2af69eb4a53bf6a48874c9004ee5373579eafa1dc4e53dace8b9d1251"
                        }
                    ]
                }
            ]
        }
    ]
}